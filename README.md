# API для социальной сети

## Описание и функционал проекта

Проект предоставляет собой RESTful API для [социальной сети блогеров](https://github.com/OksanaAstashkina/social_network_of_personal_entries), посредством которого осуществляется доступ к постам, комментариям, группам и подпискам в зависимости от статуса пользователя. Через этот интерфейс могут работать мобильное приложение или чат-бот; через него же можно передавать данные в любое приложение или на фронтенд.

Данный проект API написан на Python с использованием библиотеки Django REST Framework.

В проекте используется аутентификация по JWT-токену. У неаутентифицированных пользователей доступ к API только на чтение. Исключение — эндпоинт /follow/: доступ к нему предоставляться только аутентифицированным пользователям. Аутентифицированные пользователи могут создавать посты, комментировать записи других пользователей и подписываться на других авторов; в остальных случаях доступ предоставляется только для чтения. Добавление новых пользователей через API не предусмотрено.
Создание группы доступно только администратору через админ-панель Django.


## Технологии
* Python
* Django
* DRF
* Djoser
* JWT


## Установка из репозитория GitHub и запуск проекта в dev-режиме на локальном компьютере

__Клонируем репозиторий себе на компьютер__: 
```
git clone git@github.com:OksanaAstashkina/api_for_social_network.git
```

__Переходим в директорию с клонированным репозиторием__:
```
cd api_for_social_network
```

__Разворачиваем в репозитории виртуальное окружение__:
```
python -m venv venv (для Linux и MacOS: python3 -m venv venv)
```

__Активируем виртуальное окружение__:
```
source venv/Scripts/activate (для Linux и MacOS: source venv/bin/activate)
```

__Устанавливаем зависимости__:
```
pip install -r requirements.txt
```

__В папке с файлом manage.py выполните миграции__:
```
python manage.py migrate (для Linux и MacOS: python3 manage.py migrate)
```

__Запустите проект в dev-режиме__:
```
python manage.py runserver (для Linux и MacOS: python3 manage.py runserver)
```

__Откройте старинцу API в браузере__:
```
http://127.0.0.1:8000/api/
```

__Документация API доступна по адресу__:
```
http://127.0.0.1:8000/redoc/
```

__Admin-панель сайта доступна по адресу__:
```
http://127.0.0.1:8000/admin/
```
Для доступа к администрированию сайта необходимо создать супервользователя: в папке с файлом manage.py выполните команду
```
python manage.py createsuperuser
```



## Примеры запросов к API:

Прежде всего для доступа к API необходимо получить токен, для чего необходимо выполнить POST-запрос к url http://127.0.0.1:8000/api/v1/jwt/create/, передав поля username и password. API вернет JWT-токен.

Дальше, передав токен, можно будет обращаться к методам запроса (GET, POST, PUT, PATCH, DELETE)

При отправке запроса передавайте токен в заголовке Authorization: Bearer <токен>


### Пример запроса на получение токена

Пример запроса:
POST _http://127.0.0.1:8000/api/v1/jwt/create/_
```
{
    "username": "string",
    "password": "string"
}
```

Пример ответа:
```
{
    "refresh": "string",
    "access": "string"
}
```

### Пример запроса для неавторизованного пользователя:

**Получение записи по id**

Пример запроса:
GET __http://127.0.0.1:8000/api/v1/posts/1/_ 

Пример ответа:
```
{
    "id": 0,
    "author": "string",
    "text": "string",
    "pub_date": "2023-04-22T06:57:22.613765Z",
    "image": "string",
    "group": null
}
```

### Пример запроса для авторизованного пользователя

**Создание новой записи**

Пример запроса:
POST _http://127.0.0.1:8000/api/v1/posts/_
```
{
    "text": "string, required field",
    "image": "string", 
    "group": integer 
}
```

Пример ответа:
```
{
    "id": 0,
    "author": "string",
    "text": "string",
    "pub_date": "2019-08-24T14:15:22Z",
    "image": "string",
    "group": 0
}
```


***
## *Автор*
Оксана Асташкина - [GitHub](https://github.com/OksanaAstashkina)

### *Дата создания*
Апрель, 2023 г.
